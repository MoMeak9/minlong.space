---
Theme: devui-blue
---
åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](https://juejin.cn/post/7535511727035891754)ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥æ¢è®¨äº† Tiptap çš„ä¸‰å¤§æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼šåŸºäº ProseMirror çš„åšå®åŸºç¡€ã€èµ‹äºˆå¼€å‘è€…å®Œå…¨è‡ªç”±çš„"æ— å¤´"ç†å¿µï¼Œä»¥åŠ"ä¸‡ç‰©çš†æ‰©å±•"çš„æ¨¡å—åŒ–æ¶æ„ã€‚

ç†è®ºå­¦ä¹ å›ºç„¶é‡è¦ï¼Œä½†å®è·µå‡ºçœŸçŸ¥ã€‚ä»æœ¬ç« å¼€å§‹ï¼Œæˆ‘ä»¬å°†æ­£å¼è¸å…¥å®æˆ˜é˜¶æ®µï¼Œé€šè¿‡æ„å»ºä¸€ä¸ªå®Œæ•´çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¥æŒæ¡ Tiptap çš„ç²¾é«“ã€‚

## ğŸ“‹ æœ¬ç« å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œä½ å°†èƒ½å¤Ÿï¼š

âœ… **ç¯å¢ƒæ­å»º**ï¼šåœ¨ React é¡¹ç›®ä¸­æ­£ç¡®å®‰è£…å’Œé…ç½® Tiptap  
âœ… **å¿«é€Ÿä¸Šæ‰‹**ï¼šä½¿ç”¨ `StarterKit` æ„å»ºåŠŸèƒ½å®Œå¤‡çš„åŸºç¡€ç¼–è¾‘å™¨  
âœ… **UI å®šåˆ¶**ï¼šå®è·µ"æ— å¤´"ç†å¿µï¼Œæ‰“é€ ä¸ªæ€§åŒ–å·¥å…·æ ç•Œé¢  
âœ… **æ€§èƒ½è°ƒä¼˜**ï¼šæŒæ¡æ ¸å¿ƒä¼˜åŒ–æŠ€å·§ï¼Œé¿å…ç»„ä»¶é‡æ¸²æŸ“é™·é˜±  
âœ… **è·¨æ¡†æ¶åº”ç”¨**ï¼šäº†è§£åœ¨ Vueã€Svelte ä¸­çš„åº”ç”¨è¦ç‚¹

> ğŸ’¡ **é€‚ç”¨èŒƒå›´è¯´æ˜**  
> æœ¬æ–‡ä»¥ React ä¸ºä¸»è¦æ¼”ç¤ºæ¡†æ¶ï¼Œä½†æ ¸å¿ƒæ¦‚å¿µï¼ˆæ‰©å±•é…ç½®ã€å‘½ä»¤é“¾ã€äº‹ä»¶å¤„ç†ï¼‰åœ¨ Vueã€Svelte ç­‰æ¡†æ¶ä¸­å®Œå…¨é€šç”¨ã€‚æ–‡æœ«ä¼šæä¾›å…¶ä»–æ¡†æ¶çš„å®ç°è¦ç‚¹ã€‚

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®ç¯å¢ƒæ­å»º

### å‰ç½®æ¡ä»¶æ£€æŸ¥

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **Node. Js ç‰ˆæœ¬**ï¼š16. X æˆ–æ›´é«˜ç‰ˆæœ¬
- **åŒ…ç®¡ç†å™¨**ï¼šnpm 7. X+ æˆ– yarn 1.22. X+
- **React é¡¹ç›®**ï¼šé€šè¿‡ Create React Appã€Vite æˆ– Next. Js åˆ›å»ºçš„é¡¹ç›®å‡å¯

> ğŸ’¡ **æ¨èä½¿ç”¨ Vite**  
> ç›¸æ¯” Create React Appï¼ŒVite æä¾›æ›´å¿«çš„å¼€å‘ä½“éªŒå’Œæ›´å°çš„æ„å»ºåŒ…ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡ `npm create vite@latest my-tiptap-app -- --template react` å¿«é€Ÿåˆ›å»ºã€‚

### æ ¸å¿ƒä¾èµ–åŒ…å®‰è£…

è¿›å…¥ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… Tiptap çš„æ ¸å¿ƒä¾èµ–ï¼š

```bash
# ä½¿ç”¨ npm
npm install @tiptap/react @tiptap/starter-kit

# ä½¿ç”¨ yarn  
yarn add @tiptap/react @tiptap/starter-kit

# ä½¿ç”¨ pnpmï¼ˆæ¨èï¼‰
pnpm add @tiptap/react @tiptap/starter-kit
```

### ä¾èµ–åŒ…è¯¦è§£

è®©æˆ‘ä»¬äº†è§£ä¸€ä¸‹åˆšæ‰å®‰è£…çš„ä¸¤ä¸ªæ ¸å¿ƒåŒ…çš„ä½œç”¨ï¼š

| åŒ…å | ä½œç”¨ | åŒ…å«å†…å®¹ |
|------|------|----------|
| `@tiptap/react` | React æ¡†æ¶é›†æˆå±‚ | `useEditor`ã€`EditorContent`ã€`EditorProvider` ç­‰æ ¸å¿ƒ Hook å’Œç»„ä»¶ |
| `@tiptap/starter-kit` | å®˜æ–¹ç²¾é€‰æ‰©å±•é›†åˆ | æ®µè½ã€æ ‡é¢˜ã€ç²—ä½“ã€æ–œä½“ã€åˆ—è¡¨ã€é“¾æ¥ç­‰ 15+ å¸¸ç”¨æ‰©å±• |

> ğŸ” **StarterKit åŒ…å«çš„æ‰©å±•ä¸€è§ˆ**  
> - **æ–‡æœ¬æ ¼å¼**ï¼šBoldã€Italicã€Strikeã€Code  
> - **æ®µè½ç»“æ„**ï¼šParagraphã€Headingã€Blockquote  
> - **åˆ—è¡¨åŠŸèƒ½**ï¼šBulletListã€OrderedListã€ListItem  
> - **å…¶ä»–åŠŸèƒ½**ï¼šHardBreakã€HorizontalRuleã€Historyï¼ˆæ’¤é”€é‡åšï¼‰ç­‰

### å¯é€‰ï¼šå®‰è£…ç±»å‹å£°æ˜ï¼ˆTypeScript é¡¹ç›®ï¼‰

å¦‚æœä½ ä½¿ç”¨ TypeScriptï¼Œå»ºè®®åŒæ—¶å®‰è£…ç±»å‹å£°æ˜æ–‡ä»¶ï¼š

```bash
npm install --save-dev @types/prosemirror-view @types/prosemirror-state
```

## ğŸ“ ç¬¬äºŒæ­¥ï¼šåˆ›å»ºåŸºç¡€ç¼–è¾‘å™¨ç»„ä»¶

å®‰è£…å®Œæˆåï¼Œè®©æˆ‘ä»¬åŠ¨æ‰‹åˆ›å»ºç¬¬ä¸€ä¸ª Tiptap ç¼–è¾‘å™¨ã€‚æˆ‘ä»¬å°†ä»æœ€ç®€å•çš„ç‰ˆæœ¬å¼€å§‹ï¼Œé€æ­¥æ·»åŠ åŠŸèƒ½ã€‚

### åˆ›å»ºç¼–è¾‘å™¨æ ¸å¿ƒç»„ä»¶

åœ¨ `src` ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ `components/TiptapEditor.jsx`ï¼š

```javascript
// src/components/TiptapEditor.jsx
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';

const TiptapEditor = () => {
  const editor = useEditor({
    extensions: [
      StarterKit,
    ],
    content: `
      <h2>æ¬¢è¿æ¥åˆ° Tiptap æ·±åº¦æ•™ç¨‹</h2>
      <p>è¿™æ˜¯ä½ çš„ç¬¬ä¸€ä¸ª Tiptap ç¼–è¾‘å™¨ã€‚ä½ å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œ <strong>ç¼–è¾‘</strong> æ–‡å­—ã€‚</p>
      <p>è¯•è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
      <ul>
        <li>é€‰ä¸­æ–‡å­—æŒ‰ <strong>Ctrl+B</strong> åŠ ç²—</li>
        <li>æŒ‰ <strong>Ctrl+I</strong> æ–œä½“</li>
        <li>è¾“å…¥ <code># </code> åˆ›å»ºæ ‡é¢˜</li>
        <li>è¾“å…¥ <code>- </code> åˆ›å»ºåˆ—è¡¨</li>
      </ul>
    `,
    // ç¼–è¾‘å™¨é…ç½®é€‰é¡¹
    editorProps: {
      attributes: {
        class: 'prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none',
      },
    },
    // å½“å†…å®¹å˜åŒ–æ—¶çš„å›è°ƒ
    onUpdate: ({ editor }) => {
      const html = editor.getHTML();
      console.log('å†…å®¹å·²æ›´æ–°:', html);
    },
  });

  return (
    <div className="tiptap-editor">
      <EditorContent editor={editor} />
    </div>
  );
};

export default TiptapEditor;
```

### æ ¸å¿ƒ API è§£æ

è®©æˆ‘ä»¬æ·±å…¥ç†è§£ä¸Šè¿°ä»£ç ä¸­çš„å…³é”®æ¦‚å¿µï¼š

#### 1. `useEditor` Hook

è¿™æ˜¯ Tiptap çš„æ ¸å¿ƒ Hookï¼Œæ¥æ”¶ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼š

```javascript
const editor = useEditor({
  extensions: [],      // æ‰©å±•é…ç½®
  content: '',        // åˆå§‹å†…å®¹
  editorProps: {},    // ç¼–è¾‘å™¨å±æ€§
  onUpdate: () => {}, // å†…å®¹æ›´æ–°å›è°ƒ
  onCreate: () => {}, // ç¼–è¾‘å™¨åˆ›å»ºå›è°ƒ
  onDestroy: () => {},// ç¼–è¾‘å™¨é”€æ¯å›è°ƒ
});
```

#### 2. `extensions` æ•°ç»„

è¿™æ˜¯ Tiptap "ä¸‡ç‰©çš†æ‰©å±•" ç†å¿µçš„æ ¸å¿ƒä½“ç°ï¼š

```javascript
// æœ€ç®€é…ç½®
extensions: [StarterKit]

// è‡ªå®šä¹‰é…ç½®
extensions: [
  StarterKit.configure({
    // ç¦ç”¨æŸäº›åŠŸèƒ½
    strike: false,
    // è‡ªå®šä¹‰æ ‡é¢˜çº§åˆ«
    heading: {
      levels: [1, 2, 3],
    },
  }),
]
```

#### 3. `content` åˆå§‹å†…å®¹

æ”¯æŒå¤šç§æ ¼å¼çš„åˆå§‹å†…å®¹ï¼š

```javascript
// HTML å­—ç¬¦ä¸²
content: '<p>Hello <strong>World</strong>!</p>'

// JSON æ ¼å¼ï¼ˆProseMirror æ–‡æ¡£æ ¼å¼ï¼‰
content: {
  type: 'doc',
  content: [
    {
      type: 'paragraph',
      content: [
        { type: 'text', text: 'Hello World!' }
      ]
    }
  ]
}

// çº¯æ–‡æœ¬
content: 'Hello World!'
```

### åœ¨åº”ç”¨ä¸­ä½¿ç”¨ç¼–è¾‘å™¨

ä¿®æ”¹ä½ çš„ `src/App.jsx` æ–‡ä»¶ï¼š

```javascript
// src/App.jsx
import TiptapEditor from './components/TiptapEditor';
import './App.css';

function App() {
  return (
    <div className="App">
      <header className="app-header">
        <h1>ğŸš€ Tiptap ç¼–è¾‘å™¨æ¼”ç¤º</h1>
        <p>åŸºäº React çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®æˆ˜æ•™ç¨‹</p>
      </header>
      
      <main className="app-main">
        <TiptapEditor />
      </main>
    </div>
  );
}

export default App;
```

### æ·»åŠ åŸºç¡€æ ·å¼

åˆ›å»º `src/App.css` æ–‡ä»¶ï¼Œä¸ºç¼–è¾‘å™¨æ·»åŠ ç¾è§‚çš„æ ·å¼ï¼š

```css
/* src/App.css */
.App {
  max-width: 800px;
  margin: 0 auto;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
}

.app-header {
  text-align: center;
  margin-bottom: 2rem;
}

.app-header h1 {
  color: #2563eb;
  margin-bottom: 0.5rem;
}

.app-header p {
  color: #6b7280;
  font-size: 1.1rem;
}

/* ç¼–è¾‘å™¨å®¹å™¨æ ·å¼ */
.tiptap-editor {
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  overflow: hidden;
  transition: border-color 0.2s ease;
}

.tiptap-editor:focus-within {
  border-color: #3b82f6;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* ç¼–è¾‘å™¨å†…å®¹åŒºåŸŸæ ·å¼ */
.tiptap {
  padding: 1.5rem;
  min-height: 300px;
  background: white;
  outline: none;
  line-height: 1.6;
}

/* ç¼–è¾‘å™¨å†…å…ƒç´ æ ·å¼ */
.tiptap h1, .tiptap h2, .tiptap h3 {
  margin-top: 1.5rem;
  margin-bottom: 0.5rem;
  font-weight: 600;
}

.tiptap h1 { font-size: 1.875rem; color: #1f2937; }
.tiptap h2 { font-size: 1.5rem; color: #374151; }
.tiptap h3 { font-size: 1.25rem; color: #4b5563; }

.tiptap p {
  margin-bottom: 1rem;
  color: #374151;
}

.tiptap ul, .tiptap ol {
  margin: 1rem 0;
  padding-left: 1.5rem;
}

.tiptap li {
  margin-bottom: 0.25rem;
}

.tiptap strong {
  font-weight: 600;
  color: #1f2937;
}

.tiptap code {
  background: #f3f4f6;
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-family: 'Monaco', 'Consolas', monospace;
  font-size: 0.875rem;
}

.tiptap blockquote {
  border-left: 4px solid #e5e7eb;
  padding-left: 1rem;
  margin: 1.5rem 0;
  font-style: italic;
  color: #6b7280;
}
```

### ğŸ‰ è¿è¡Œæµ‹è¯•

ç°åœ¨å¯åŠ¨ä½ çš„å¼€å‘æœåŠ¡å™¨ï¼š

```bash
npm run dev
# æˆ–è€…
yarn dev
```

è®¿é—® `http://localhost:3000`ï¼ˆæˆ– Vite é»˜è®¤çš„ `http://localhost:5173`ï¼‰ï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼

å°è¯•ä»¥ä¸‹æ“ä½œæ¥éªŒè¯ç¼–è¾‘å™¨åŠŸèƒ½ï¼š
- âœ… ç›´æ¥è¾“å…¥æ–‡å­—
- âœ… é€‰ä¸­æ–‡å­—ä½¿ç”¨å¿«æ·é”®ï¼ˆCtrl+B åŠ ç²—ã€Ctrl+I æ–œä½“ï¼‰
- âœ… è¾“å…¥ `# ` åˆ›å»ºæ ‡é¢˜
- âœ… è¾“å…¥ `- ` åˆ›å»ºæ— åºåˆ—è¡¨
- âœ… ä½¿ç”¨ Ctrl+Z æ’¤é”€æ“ä½œ

## ğŸ¨ ç¬¬ä¸‰æ­¥ï¼šæ‰“é€ ä¸“å±å·¥å…·æ  - å®è·µ"æ— å¤´"ç†å¿µ

ä¸€ä¸ªåªèƒ½é€šè¿‡é”®ç›˜å¿«æ·é”®æ“ä½œçš„ç¼–è¾‘å™¨è¿˜ä¸å¤Ÿäººæ€§åŒ–ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå¯è§†åŒ–çš„å·¥å…·æ ã€‚è¿™æ­£æ˜¯ä½“ç° Tiptap "æ— å¤´"è®¾è®¡å¨åŠ›çš„ç»ä½³æ—¶æœºâ€”â€”Tiptap ä¸“æ³¨äºç¼–è¾‘é€»è¾‘ï¼ŒUI å®Œå…¨ç”±æˆ‘ä»¬æŒæ§ã€‚

### åˆ›å»ºåŸºç¡€å·¥å…·æ ç»„ä»¶

æ–°å»º `src/components/MenuBar.jsx` æ–‡ä»¶ï¼š

```javascript
// src/components/MenuBar.jsx
import React from 'react';

const MenuBar = ({ editor }) => {
  if (!editor) {
    return null;
  }

  return (
    <div className="menu-bar">
      {/* æ–‡æœ¬æ ¼å¼æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleBold().run()}
          disabled={!editor.can().chain().focus().toggleBold().run()}
          className={editor.isActive('bold') ? 'is-active' : ''}
          title="åŠ ç²— (Ctrl+B)"
        >
          <strong>B</strong>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleItalic().run()}
          disabled={!editor.can().chain().focus().toggleItalic().run()}
          className={editor.isActive('italic') ? 'is-active' : ''}
          title="æ–œä½“ (Ctrl+I)"
        >
          <em>I</em>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleStrike().run()}
          disabled={!editor.can().chain().focus().toggleStrike().run()}
          className={editor.isActive('strike') ? 'is-active' : ''}
          title="åˆ é™¤çº¿"
        >
          <s>S</s>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleCode().run()}
          disabled={!editor.can().chain().focus().toggleCode().run()}
          className={editor.isActive('code') ? 'is-active' : ''}
          title="è¡Œå†…ä»£ç "
        >
          &lt;/&gt;
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* æ ‡é¢˜æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}
          className={editor.isActive('heading', { level: 1 }) ? 'is-active' : ''}
          title="ä¸€çº§æ ‡é¢˜"
        >
          H1
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}
          className={editor.isActive('heading', { level: 2 }) ? 'is-active' : ''}
          title="äºŒçº§æ ‡é¢˜"
        >
          H2
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()}
          className={editor.isActive('heading', { level: 3 }) ? 'is-active' : ''}
          title="ä¸‰çº§æ ‡é¢˜"
        >
          H3
        </button>
        
        <button
          onClick={() => editor.chain().focus().setParagraph().run()}
          className={editor.isActive('paragraph') ? 'is-active' : ''}
          title="æ­£æ–‡æ®µè½"
        >
          P
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* åˆ—è¡¨æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleBulletList().run()}
          className={editor.isActive('bulletList') ? 'is-active' : ''}
          title="æ— åºåˆ—è¡¨"
        >
          â€¢ åˆ—è¡¨
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleOrderedList().run()}
          className={editor.isActive('orderedList') ? 'is-active' : ''}
          title="æœ‰åºåˆ—è¡¨"
        >
          1. åˆ—è¡¨
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleBlockquote().run()}
          className={editor.isActive('blockquote') ? 'is-active' : ''}
          title="å¼•ç”¨å—"
        >
          " å¼•ç”¨
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* æ“ä½œæŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().undo().run()}
          disabled={!editor.can().chain().focus().undo().run()}
          title="æ’¤é”€ (Ctrl+Z)"
        >
          â†¶ æ’¤é”€
        </button>
        
        <button
          onClick={() => editor.chain().focus().redo().run()}
          disabled={!editor.can().chain().focus().redo().run()}
          title="é‡åš (Ctrl+Y)"
        >
          â†· é‡åš
        </button>
      </div>
    </div>
  );
};

export default MenuBar;
```

### æ·±å…¥ç†è§£æ ¸å¿ƒ API

åœ¨ä¸Šè¿°å·¥å…·æ ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Tiptap çš„ä¸‰ä¸ªæ ¸å¿ƒ APIï¼š

#### 1. å‘½ä»¤é“¾ APIï¼š`editor.chain()`

```javascript
// åŸºç¡€è¯­æ³•
editor.chain().focus().toggleBold().run()

// é“¾å¼æ“ä½œï¼šå…ˆèšç„¦ï¼Œå†åŠ ç²—ï¼Œæœ€åæ‰§è¡Œ
editor
  .chain()           // å¼€å¯å‘½ä»¤é“¾
  .focus()           // èšç„¦ç¼–è¾‘å™¨
  .toggleBold()      // åˆ‡æ¢åŠ ç²—çŠ¶æ€
  .run()             // æ‰§è¡Œæ‰€æœ‰å‘½ä»¤

// å¤åˆæ“ä½œç¤ºä¾‹
editor
  .chain()
  .focus()
  .clearContent()                    // æ¸…ç©ºå†…å®¹
  .setContent('<p>æ–°å†…å®¹</p>')        // è®¾ç½®æ–°å†…å®¹
  .selectAll()                       // å…¨é€‰
  .run()
```

#### 2. çŠ¶æ€æ£€æµ‹ APIï¼š`editor.isActive()`

```javascript
// æ£€æµ‹å½“å‰æ˜¯å¦ä¸ºåŠ ç²—çŠ¶æ€
editor.isActive('bold')              // è¿”å› true/false

// æ£€æµ‹æ˜¯å¦ä¸ºç‰¹å®šçº§åˆ«çš„æ ‡é¢˜
editor.isActive('heading', { level: 1 })

// æ£€æµ‹æ˜¯å¦ä¸ºåˆ—è¡¨é¡¹
editor.isActive('listItem')

// æ£€æµ‹æ˜¯å¦æœ‰é€‰ä¸­å†…å®¹
editor.state.selection.empty        // è¿”å› true/false
```

#### 3. èƒ½åŠ›æ£€æµ‹ APIï¼š`editor.can()`

```javascript
// æ£€æµ‹æ˜¯å¦å¯ä»¥æ‰§è¡ŒæŸä¸ªå‘½ä»¤
editor.can().chain().focus().toggleBold().run()

// æ£€æµ‹æ’¤é”€èƒ½åŠ›
editor.can().undo()

// æ£€æµ‹é‡åšèƒ½åŠ›  
editor.can().redo()
```

### é›†æˆå·¥å…·æ åˆ°ç¼–è¾‘å™¨

ä¿®æ”¹ `src/components/TiptapEditor.jsx`ï¼Œå°†å·¥å…·æ é›†æˆè¿›æ¥ï¼š

```javascript
// src/components/TiptapEditor.jsx
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import MenuBar from './MenuBar';

const TiptapEditor = () => {
  const editor = useEditor({
    extensions: [
      StarterKit,
    ],
    content: `
      <h2>æ¬¢è¿æ¥åˆ° Tiptap æ·±åº¦æ•™ç¨‹</h2>
      <p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ä¸Šæ–¹çš„å·¥å…·æ æ¥æ ¼å¼åŒ–æ–‡æœ¬äº†ï¼</p>
      <p>è¯•è¯•ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
      <ul>
        <li>ç‚¹å‡» <strong>B</strong> æŒ‰é’®åŠ ç²—æ–‡å­—</li>
        <li>ä½¿ç”¨ <em>H1ã€H2ã€H3</em> åˆ›å»ºä¸åŒçº§åˆ«çš„æ ‡é¢˜</li>
        <li>åˆ›å»º <strong>æœ‰åº</strong> å’Œ <strong>æ— åº</strong> åˆ—è¡¨</li>
        <li>æ·»åŠ  <blockquote>å¼•ç”¨å—</blockquote></li>
      </ul>
    `,
    editorProps: {
      attributes: {
        class: 'prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none',
      },
    },
  });

  return (
    <div className="tiptap-editor">
      <MenuBar editor={editor} />
      <EditorContent editor={editor} />
    </div>
  );
};

export default TiptapEditor;
```

### å·¥å…·æ æ ·å¼è®¾è®¡

åœ¨ `src/App.css` ä¸­æ·»åŠ å·¥å…·æ æ ·å¼ï¼š

```css
/* å·¥å…·æ æ ·å¼ */
.menu-bar {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
  padding: 12px 16px;
  background: #f8fafc;
  border-bottom: 1px solid #e2e8f0;
}

.button-group {
  display: flex;
  gap: 2px;
}

.menu-bar button {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  padding: 4px 8px;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  background: white;
  color: #374151;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
}

.menu-bar button:hover:not(:disabled) {
  background: #f3f4f6;
  border-color: #9ca3af;
}

.menu-bar button:active:not(:disabled) {
  background: #e5e7eb;
  transform: translateY(1px);
}

.menu-bar button.is-active {
  background: #3b82f6;
  border-color: #2563eb;
  color: white;
}

.menu-bar button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.divider {
  width: 1px;
  height: 24px;
  background: #d1d5db;
  margin: 0 8px;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 640px) {
  .menu-bar {
    padding: 8px 12px;
  }
  
  .button-group {
    gap: 1px;
  }
  
  .menu-bar button {
    min-width: 28px;
    height: 28px;
    font-size: 11px;
  }
  
  .divider {
    height: 20px;
    margin: 0 4px;
  }
}
```

### ğŸ‰ æµ‹è¯•å·¥å…·æ åŠŸèƒ½

åˆ·æ–°é¡µé¢ï¼Œä½ ç°åœ¨æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡ä¸”ç¾è§‚çš„ç¼–è¾‘å™¨å·¥å…·æ ï¼å°è¯•ä»¥ä¸‹æ“ä½œï¼š

- âœ… ç‚¹å‡»æ ¼å¼åŒ–æŒ‰é’®ï¼ˆåŠ ç²—ã€æ–œä½“ã€åˆ é™¤çº¿ï¼‰
- âœ… åˆ‡æ¢ä¸åŒçº§åˆ«çš„æ ‡é¢˜
- âœ… åˆ›å»ºå’Œç®¡ç†åˆ—è¡¨
- âœ… ä½¿ç”¨æ’¤é”€/é‡åšåŠŸèƒ½
- âœ… è§‚å¯ŸæŒ‰é’®çš„æ¿€æ´»çŠ¶æ€å˜åŒ–

> ğŸ’¡ **UI è‡ªç”±åº¦ä½“ç°**  
> æ³¨æ„åˆ°äº†å—ï¼Ÿæˆ‘ä»¬å®Œå…¨æ§åˆ¶äº†å·¥å…·æ çš„å¤–è§‚ã€å¸ƒå±€å’Œäº¤äº’ã€‚è¿™å°±æ˜¯"æ— å¤´"è®¾è®¡çš„é­…åŠ›ï¼šTiptap è´Ÿè´£å¤æ‚çš„ç¼–è¾‘é€»è¾‘ï¼Œè€Œ UI çš„ä¸€åˆ‡éƒ½ç”±æˆ‘ä»¬å†³å®šã€‚

## âš¡ ç¬¬å››æ­¥ï¼šæ€§èƒ½ä¼˜åŒ–å®æˆ˜ - è§£å†³é‡æ¸²æŸ“é™·é˜±

ç›®å‰æˆ‘ä»¬çš„ç¼–è¾‘å™¨å·¥ä½œè‰¯å¥½ï¼Œä½†éšè—ç€ä¸€ä¸ªä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚è®©æˆ‘ä»¬é€šè¿‡ React Developer Tools è§‚å¯Ÿä¸€ä¸‹ï¼š

### é—®é¢˜åˆ†æ

å½“å‰çš„å®ç°ä¸­ï¼Œ`useEditor` Hook æ‰€åœ¨çš„ç»„ä»¶ä¼šåœ¨ç¼–è¾‘å™¨æ¯æ¬¡çŠ¶æ€å˜åŒ–æ—¶éƒ½è§¦å‘é‡æ–°æ¸²æŸ“ï¼š

- âœ‹ æ¯æ¬¡æŒ‰é”®éƒ½ä¼šå¯¼è‡´ `TiptapEditor` ç»„ä»¶é‡æ¸²æŸ“
- âœ‹ `MenuBar` ç»„ä»¶ä¹Ÿä¼šè·Ÿç€é‡æ¸²æŸ“
- âœ‹ åœ¨é•¿æ–‡æ¡£ç¼–è¾‘æ—¶ä¼šé€ æˆæ˜æ˜¾çš„æ€§èƒ½ä¸‹é™

### è§£å†³æ–¹æ¡ˆï¼šEditorProvider æ¨¡å¼

Tiptap æä¾›äº† `EditorProvider` å’Œ `useCurrentEditor` æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®©æˆ‘ä»¬é‡æ„ä»£ç ï¼š

#### 1. é‡æ„ MenuBar ç»„ä»¶

ä¿®æ”¹ `src/components/MenuBar.jsx`ï¼š

```javascript
// src/components/MenuBar.jsx
import React from 'react';
import { useCurrentEditor } from '@tiptap/react';

const MenuBar = () => {
  const { editor } = useCurrentEditor();

  if (!editor) {
    return null;
  }

  return (
    <div className="menu-bar">
      {/* æ–‡æœ¬æ ¼å¼æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleBold().run()}
          disabled={!editor.can().chain().focus().toggleBold().run()}
          className={editor.isActive('bold') ? 'is-active' : ''}
          title="åŠ ç²— (Ctrl+B)"
        >
          <strong>B</strong>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleItalic().run()}
          disabled={!editor.can().chain().focus().toggleItalic().run()}
          className={editor.isActive('italic') ? 'is-active' : ''}
          title="æ–œä½“ (Ctrl+I)"
        >
          <em>I</em>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleStrike().run()}
          disabled={!editor.can().chain().focus().toggleStrike().run()}
          className={editor.isActive('strike') ? 'is-active' : ''}
          title="åˆ é™¤çº¿"
        >
          <s>S</s>
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleCode().run()}
          disabled={!editor.can().chain().focus().toggleCode().run()}
          className={editor.isActive('code') ? 'is-active' : ''}
          title="è¡Œå†…ä»£ç "
        >
          &lt;/&gt;
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* æ ‡é¢˜æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()}
          className={editor.isActive('heading', { level: 1 }) ? 'is-active' : ''}
          title="ä¸€çº§æ ‡é¢˜"
        >
          H1
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()}
          className={editor.isActive('heading', { level: 2 }) ? 'is-active' : ''}
          title="äºŒçº§æ ‡é¢˜"
        >
          H2
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()}
          className={editor.isActive('heading', { level: 3 }) ? 'is-active' : ''}
          title="ä¸‰çº§æ ‡é¢˜"
        >
          H3
        </button>
        
        <button
          onClick={() => editor.chain().focus().setParagraph().run()}
          className={editor.isActive('paragraph') ? 'is-active' : ''}
          title="æ­£æ–‡æ®µè½"
        >
          P
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* åˆ—è¡¨æŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().toggleBulletList().run()}
          className={editor.isActive('bulletList') ? 'is-active' : ''}
          title="æ— åºåˆ—è¡¨"
        >
          â€¢ åˆ—è¡¨
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleOrderedList().run()}
          className={editor.isActive('orderedList') ? 'is-active' : ''}
          title="æœ‰åºåˆ—è¡¨"
        >
          1. åˆ—è¡¨
        </button>
        
        <button
          onClick={() => editor.chain().focus().toggleBlockquote().run()}
          className={editor.isActive('blockquote') ? 'is-active' : ''}
          title="å¼•ç”¨å—"
        >
          " å¼•ç”¨
        </button>
      </div>

      {/* åˆ†éš”çº¿ */}
      <div className="divider"></div>

      {/* æ“ä½œæŒ‰é’® */}
      <div className="button-group">
        <button
          onClick={() => editor.chain().focus().undo().run()}
          disabled={!editor.can().chain().focus().undo().run()}
          title="æ’¤é”€ (Ctrl+Z)"
        >
          â†¶ æ’¤é”€
        </button>
        
        <button
          onClick={() => editor.chain().focus().redo().run()}
          disabled={!editor.can().chain().focus().redo().run()}
          title="é‡åš (Ctrl+Y)"
        >
          â†· é‡åš
        </button>
      </div>
    </div>
  );
};

export default MenuBar;
```

#### 2. é‡æ„ä¸»ç¼–è¾‘å™¨ç»„ä»¶

ä¿®æ”¹ `src/components/TiptapEditor.jsx`ï¼š

```javascript
// src/components/TiptapEditor.jsx
import { EditorProvider } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import MenuBar from './MenuBar';

const TiptapEditor = () => {
  // ç¼–è¾‘å™¨é…ç½®
  const extensions = [StarterKit];
  
  const content = `
    <h2>ğŸš€ æ€§èƒ½ä¼˜åŒ–åçš„ Tiptap ç¼–è¾‘å™¨</h2>
    <p>ç°åœ¨ç¼–è¾‘å™¨çš„æ€§èƒ½å·²ç»å¾—åˆ°å¤§å¹…ä¼˜åŒ–ï¼</p>
    <p><strong>ä¼˜åŒ–è¦ç‚¹ï¼š</strong></p>
    <ul>
      <li>ä½¿ç”¨ <code>EditorProvider</code> ç®¡ç†ç¼–è¾‘å™¨å®ä¾‹</li>
      <li>å·¥å…·æ é€šè¿‡ <code>useCurrentEditor</code> è·å–ç¼–è¾‘å™¨å¼•ç”¨</li>
      <li>é¿å…äº†ä¸å¿…è¦çš„ç»„ä»¶é‡æ¸²æŸ“</li>
      <li>å¤§å¹…æå‡äº†ç¼–è¾‘ä½“éªŒçš„æµç•…åº¦</li>
    </ul>
    <blockquote>
      <p>ğŸ’¡ <strong>æ€§èƒ½æç¤º</strong>ï¼šåœ¨é•¿æ–‡æ¡£ç¼–è¾‘æ—¶ï¼Œè¿™ç§ä¼˜åŒ–å°¤å…¶é‡è¦ã€‚</p>
    </blockquote>
  `;

  const editorProps = {
    attributes: {
      class: 'prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto focus:outline-none',
    },
  };

  return (
    <div className="tiptap-editor">
      <EditorProvider
        extensions={extensions}
        content={content}
        editorProps={editorProps}
        slotBefore={<MenuBar />}
        onUpdate={({ editor }) => {
          console.log('å†…å®¹å·²æ›´æ–°:', editor.getHTML());
        }}
      >
        {/* EditorProvider ä¼šè‡ªåŠ¨æ¸²æŸ“ EditorContent */}
        {/* å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¶ä»–å­ç»„ä»¶ */}
      </EditorProvider>
    </div>
  );
};

export default TiptapEditor;
```

### æ€§èƒ½ä¼˜åŒ–åŸç†è§£æ

è®©æˆ‘ä»¬ç†è§£ä¸€ä¸‹è¿™ç§é‡æ„å¸¦æ¥çš„æ€§èƒ½æå‡ï¼š

| ä¼˜åŒ–å‰ï¼ˆuseEditorï¼‰ | ä¼˜åŒ–åï¼ˆEditorProviderï¼‰ |
|-------------------|------------------------|
| æ¯æ¬¡ç¼–è¾‘éƒ½é‡æ¸²æŸ“ä¸»ç»„ä»¶ | ä¸»ç»„ä»¶ä¿æŒé™æ€ |
| å·¥å…·æ è·Ÿéšé‡æ¸²æŸ“ | å·¥å…·æ ç‹¬ç«‹æ¸²æŸ“ |
| Props ä¼ é€’é“¾æ¡é•¿ | Context ç›´æ¥è®¿é—® |
| æ€§èƒ½éšå†…å®¹å¢é•¿ä¸‹é™ | æ€§èƒ½ç¨³å®š |

#### UseCurrentEditor çš„å·¥ä½œæœºåˆ¶

```javascript
// useCurrentEditor çš„ç‰¹ç‚¹
const { editor } = useCurrentEditor();

// âœ… ä»…è·å–ç¼–è¾‘å™¨å®ä¾‹å¼•ç”¨ï¼Œä¸ç›‘å¬çŠ¶æ€å˜åŒ–
// âœ… ä¸ä¼šå¯¼è‡´ç»„ä»¶é‡æ¸²æŸ“
// âœ… é€‚åˆç”¨äºå·¥å…·æ ç­‰é™æ€ UI ç»„ä»¶
// âœ… å‘½ä»¤æ‰§è¡Œå’ŒçŠ¶æ€æ£€æµ‹åŠŸèƒ½å®Œå…¨æ­£å¸¸
```

### ğŸ¯ æ€§èƒ½æµ‹è¯•

é‡æ„å®Œæˆåï¼Œè®©æˆ‘ä»¬éªŒè¯æ€§èƒ½æå‡ï¼š

1. **æ‰“å¼€ React Developer Tools**
2. **å¯ç”¨ "Highlight updates when components render"**
3. **åœ¨ç¼–è¾‘å™¨ä¸­å¿«é€Ÿè¾“å…¥æ–‡å­—**
4. **è§‚å¯Ÿç»„ä»¶é‡æ¸²æŸ“æƒ…å†µ**

æ‚¨ä¼šå‘ç°ï¼š
- âœ… è¾“å…¥æ—¶åªæœ‰ç¼–è¾‘å†…å®¹åŒºåŸŸæ›´æ–°
- âœ… å·¥å…·æ ä¿æŒé™æ€ï¼Œä¸å†é—ªçƒ
- âœ… æ•´ä½“ç¼–è¾‘ä½“éªŒæ›´åŠ æµç•…

## ğŸŒ è·¨æ¡†æ¶åº”ç”¨æŒ‡å—

è™½ç„¶æœ¬æ–‡ä»¥ React ä¸ºä¾‹ï¼Œä½† Tiptap å¯¹å…¶ä»–ä¸»æµå‰ç«¯æ¡†æ¶åŒæ ·æä¾›äº†ä¼˜ç§€çš„æ”¯æŒã€‚

### Vue 3 é›†æˆè¦ç‚¹

```vue
<!-- Vue 3 ç¤ºä¾‹ -->
<template>
  <div class="tiptap-editor">
    <MenuBar :editor="editor" />
    <EditorContent :editor="editor" />
  </div>
</template>

<script setup>
import { useEditor, EditorContent } from '@tiptap/vue-3'
import StarterKit from '@tiptap/starter-kit'
import MenuBar from './MenuBar.vue'

const editor = useEditor({
  extensions: [StarterKit],
  content: '<p>Hello Vue!</p>',
  onUpdate: ({ editor }) => {
    console.log('å†…å®¹æ›´æ–°:', editor.getHTML())
  }
})
</script>
```

### Svelte é›†æˆè¦ç‚¹

```svelte
<!-- Svelte ç¤ºä¾‹ -->
<script>
  import { onMount, onDestroy } from 'svelte'
  import { Editor } from '@tiptap/core'
  import StarterKit from '@tiptap/starter-kit'
  
  let editor
  let element

  onMount(() => {
    editor = new Editor({
      element: element,
      extensions: [StarterKit],
      content: '<p>Hello Svelte!</p>',
      onTransaction: () => {
        // å¼ºåˆ¶é‡æ–°æ¸²æŸ“ä»¥æ›´æ–° UI
        editor = editor
      },
    })
  })

  onDestroy(() => {
    if (editor) {
      editor.destroy()
    }
  })
</script>

<div bind:this={element}></div>
```

### è·¨æ¡†æ¶é€šç”¨è¦ç‚¹

æ— è®ºä½¿ç”¨å“ªç§æ¡†æ¶ï¼Œä»¥ä¸‹æ¦‚å¿µéƒ½æ˜¯ä¸€è‡´çš„ï¼š

```javascript
// 1. æ‰©å±•é…ç½®
extensions: [StarterKit, /* å…¶ä»–æ‰©å±• */]

// 2. å‘½ä»¤é“¾è¯­æ³•
editor.chain().focus().toggleBold().run()

// 3. çŠ¶æ€æ£€æµ‹
editor.isActive('bold')

// 4. å†…å®¹æ“ä½œ
editor.getHTML()        // è·å– HTML
editor.setContent()     // è®¾ç½®å†…å®¹
editor.clearContent()   // æ¸…ç©ºå†…å®¹
```

## ğŸ“š æœ¬ç« è¦ç‚¹æ€»ç»“

é€šè¿‡æœ¬ç« å­¦ä¹ ï¼Œä½ å·²ç»æŒæ¡äº† Tiptap çš„æ ¸å¿ƒä½¿ç”¨æŠ€èƒ½ï¼š

### ğŸ¯ æ ¸å¿ƒæˆå°±

| æŠ€èƒ½ç‚¹ | æŒæ¡ç¨‹åº¦ | å®é™…åº”ç”¨ |
|--------|----------|----------|
| **ç¯å¢ƒæ­å»º** | âœ… å®Œæˆ | æ­£ç¡®å®‰è£…å’Œé…ç½® Tiptap ä¾èµ– |
| **åŸºç¡€ç¼–è¾‘å™¨** | âœ… å®Œæˆ | ä½¿ç”¨ useEditor åˆ›å»ºåŠŸèƒ½å®Œå¤‡çš„ç¼–è¾‘å™¨ |
| **è‡ªå®šä¹‰ UI** | âœ… å®Œæˆ | å®ç°å®Œæ•´çš„å·¥å…·æ ç•Œé¢ |
| **æ€§èƒ½ä¼˜åŒ–** | âœ… å®Œæˆ | æŒæ¡ EditorProvider ä¼˜åŒ–æ¨¡å¼ |
| **API ç†è§£** | âœ… å®Œæˆ | ç†Ÿç»ƒä½¿ç”¨å‘½ä»¤é“¾ã€çŠ¶æ€æ£€æµ‹ç­‰æ ¸å¿ƒ API |

### ğŸ”‘ å…³é”® API é€ŸæŸ¥

```javascript
// ç¼–è¾‘å™¨åˆå§‹åŒ–
const editor = useEditor({ extensions, content, onUpdate })

// å‘½ä»¤æ‰§è¡Œ
editor.chain().focus().toggleBold().run()

// çŠ¶æ€æ£€æµ‹  
editor.isActive('bold')
editor.can().undo()

// å†…å®¹æ“ä½œ
editor.getHTML()
editor.setContent('<p>æ–°å†…å®¹</p>')
editor.clearContent()

// æ€§èƒ½ä¼˜åŒ–
const { editor } = useCurrentEditor()  // ä¸è§¦å‘é‡æ¸²æŸ“
```

### ğŸš€ ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘

åœ¨ä¸‹ä¸€ç¯‡æ–‡ç«  **ã€ŠTiptap æ·±åº¦æ•™ç¨‹ (ä¸‰)ï¼šæ‰©å±•çš„åŠ›é‡ï¼šåˆ†ç±»è¯¦è§£ä¸å®æˆ˜ã€‹** ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢ç´¢ `StarterKit` ä¹‹å¤–çš„å¹¿é˜”ä¸–ç•Œï¼Œå­¦ä¹ å¦‚ä½•é›†æˆå’Œä½¿ç”¨é“¾æ¥ã€å›¾ç‰‡ã€å ä½ç¬¦ã€ä»£ç é«˜äº®ç­‰æ›´å¤šå¼ºå¤§çš„å®˜æ–¹æ‰©å±•ã€‚